import{j as F,r as p,R as N,a as S}from"./vendor.b3af9389.js";const b=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}};b();const a=F.exports.jsx,r=F.exports.jsxs,h=F.exports.Fragment,v=e=>r("div",{className:"field",children:[a("div",{className:"field__label",children:e.label}),a("div",{className:"field__content",children:e.children})]});var c;(function(e){e[e.FRESH=0]="FRESH",e[e.VIEW=1]="VIEW",e[e.RESET=2]="RESET"})(c||(c={}));const y=e=>`DESENSITIZE_${e}`,w=(e,t="1")=>localStorage.setItem(y(e),t),f=e=>{const t=y(e),s=localStorage.getItem(t);if(s)return s},E=function(){var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1,weixin:e.indexOf("MicroMessenger")>-1,qq:e.match(/\sQQ/i)}}(),C=e=>{const[t,s]=p.exports.useState(""),[o,n]=p.exports.useState("");return r("div",{className:"home",children:[a("h1",{className:"home__title",children:"\u8131\u654F\u52A9\u624B"}),a(v,{label:"\u6211\u8BE5\u600E\u4E48\u79F0\u547C\u4F60\uFF1F",children:a("input",{value:t,onChange:d=>{const m=d.target;if(!m)return;const _=m.value;s(_)}})}),a(v,{label:"\u4F60\u4ECE\u4EC0\u4E48\u65F6\u5019\u5F00\u59CB\u8131\u654F\uFF1F",children:a("input",{type:"date",value:o,onChange:d=>{const m=d.target;if(!m)return;const _=m.value;n(_)}})}),a(v,{children:a("button",{className:"home__button",onClick:()=>{!t||!o||(w("name",t),w("date",o),e.setState(c.VIEW))},children:"\u5F00\u59CB\u5427"})})]})};const g=[{type:1,dose:[1,2,3,4,6,8,10]},{type:2,dose:[1,2,3,4,6,8,10]},{type:3,dose:[1,2,3,4,6,8,10]},{type:4,dose:[3]},{type:4,dose:[3]},{type:5,dose:[2]}],D=(e=new Date().toLocaleDateString())=>{const t=new Date(e);return t.setDate(t.getDate()+1),t.toLocaleDateString()},x=(e,t)=>{const s=t?+new Date(t):+new Date(new Date().toLocaleDateString()),o=+new Date(e.split("-").join("/"));if(s<o)return;const n=Math.ceil((s-o)/(1e3*60*60*24))+1,i=Math.ceil(n/7),u=n%7,l=i>g.length?g.slice(-1)[0]:g[i-1];return{type:l.type,number:l.dose[u-1]||l.dose.slice(-1)}},A=e=>{const{emphasize:t,type:s}=e;return t?a("span",{className:`view__foot__type view__number--${s}`,children:s}):a(h,{children:s})},O=e=>{const t=f("name"),s=f("date");if(p.exports.useEffect(()=>{(!t||!s)&&e.setState(c.FRESH)},[]),!t||!s)return a(h,{});const o=x(s),n=x(s,D()),i=()=>{e.setState(c.RESET)},u=new Date().toLocaleDateString().split("/").join("-"),l=E.iPad||E.ios||E.iPhone,d=n&&n.type!==(o==null?void 0:o.type);return r("div",{className:`view ${l?"ios-compatible":""}`,children:[r("div",{className:"view__head",children:[a("span",{className:"view__head__reset",onClick:i,children:"\u91CD\u65B0\u8BBE\u5B9A"}),r("span",{className:"view__head__time",children:["\u5F00\u59CB\u65F6\u95F4\uFF1A",s]})]}),r("div",{className:"view__content",children:[r("h1",{className:"view__content__name",children:["\u4F60\u597D\uFF0C",t]}),o?r(h,{children:[r("p",{className:"view__content__current",children:["\u4ECA\u65E5\u8BA1\u5212, ",u]}),r("p",{className:"view__content__plan",children:["\u7545\u8FEA",a("span",{className:`view__content__type view__number--${o.type}`,children:o.type}),"\u53F7\uFF0C",a("span",{className:`view__content__number view__number--${o.number}`,children:o.number}),"\u6EF4"]})]}):r("p",{style:{textAlign:"center"},children:["\u4F60\u5C06\u5728",a("span",{className:"view__content__nextdate",children:s}),"\u5F00\u59CB\u8131\u654F"]})]}),a("div",{className:"view__foot",children:n?r(h,{children:["\u660E\u65E5\u8BA1\u5212\uFF1A\u7545\u8FEA",a(A,{type:n.type,emphasize:!!d}),"\u53F7\uFF0C",n.number,"\u6EF4"]}):void 0})]})},B=()=>{const e=f("name"),t=f("date"),[s,o]=p.exports.useState(c.FRESH);return e&&t&&s===c.FRESH&&o(c.VIEW),{state:s,setState:o,name:e,date:t}};function P(){const e=B();return a("div",{className:"App",children:e.state===c.VIEW?a(O,{setState:e.setState}):a(C,{setState:e.setState})})}N.render(a(S.StrictMode,{children:a(P,{})}),document.getElementById("root"));
