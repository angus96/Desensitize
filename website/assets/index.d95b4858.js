import{j as F,r as m,R as w,a as N}from"./vendor.b3af9389.js";const C=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};C();const a=F.exports.jsx,c=F.exports.jsxs,v=F.exports.Fragment,f=e=>c("div",{className:"field",children:[a("div",{className:"field__label",children:e.label}),a("div",{className:"field__content",children:e.children})]});var u;(function(e){e[e.FRESH=0]="FRESH",e[e.VIEW=1]="VIEW",e[e.RESET=2]="RESET"})(u||(u={}));const g=e=>`DESENSITIZE_${e}`,y=(e,t="1")=>localStorage.setItem(g(e),t),h=e=>{const t=g(e),s=localStorage.getItem(t);if(s)return s},D=e=>{const[t,s]=m.exports.useState(""),[o,n]=m.exports.useState("");return c("div",{className:"home",children:[a("h1",{className:"home__title",children:"\u8131\u654F\u8BA1\u5212"}),a(f,{label:"\u6211\u8BE5\u600E\u4E48\u79F0\u547C\u4F60\uFF1F",children:a("input",{value:t,onChange:p=>{const l=p.target;if(!l)return;const _=l.value;s(_)}})}),a(f,{label:"\u4F60\u4ECE\u4EC0\u4E48\u65F6\u5019\u5F00\u59CB\u8131\u654F\uFF1F",children:a("input",{type:"date",value:o,onChange:p=>{const l=p.target;if(!l)return;const _=l.value;n(_)}})}),a(f,{children:a("button",{className:"home__button",onClick:()=>{!t||!o||(y("name",t),y("date",o),e.setState(u.VIEW))},children:"\u5F00\u59CB\u5427"})})]})};const E=[{type:1,dose:[1,2,3,4,6,8,10]},{type:2,dose:[1,2,3,4,6,8,10]},{type:3,dose:[1,2,3,4,6,8,10]},{type:4,dose:[3]},{type:4,dose:[3]},{type:5,dose:[2]}],x=(e=new Date().toLocaleDateString())=>{const t=new Date(e);return t.setDate(t.getDate()+1),t.toLocaleDateString()},S=(e,t)=>{const s=t?+new Date(t):+new Date(new Date().toLocaleDateString()),o=+new Date(e);if(s<o)return;const n=Math.ceil((s-o)/(1e3*60*60*24))+1,r=Math.ceil(n/7),i=n%7,d=r>E.length?E.slice(-1)[0]:E[r-1];return{type:d.type,number:d.dose[i-1]||d.dose.slice(-1)}},b=e=>{const t=h("name"),s=h("date");if(m.exports.useEffect(()=>{(!t||!s)&&e.setState(u.FRESH)},[]),!t||!s)return a(v,{});const o=S(s),n=S(s,x()),r=()=>{e.setState(u.RESET)},i=new Date().toLocaleDateString().split("/").join("-");return c("div",{className:"view",children:[c("div",{className:"view__head",children:[a("span",{className:"view__head__reset",onClick:r,children:"\u91CD\u65B0\u8BBE\u5B9A"}),c("span",{className:"view__head__time",children:["\u5F00\u59CB\u65F6\u95F4\uFF1A",s]})]}),c("div",{className:"view__content",children:[c("h1",{className:"view__content__name",children:["\u4F60\u597D\uFF0C",t]}),o?c(v,{children:[c("p",{className:"view__content__current",children:["\u4ECA\u65E5\u8BA1\u5212, ",i]}),c("p",{className:"view__content__plan",children:["\u7545\u8FEA",a("span",{className:`view__content__type view__content__type--${o.type}`,children:o.type}),"\u53F7\uFF0C",a("span",{className:`view__content__number view__content__number--${o.number}`,children:o.number}),"\u6EF4"]})]}):c("p",{children:["\u4F60\u5C06\u5728",s,"\u5F00\u59CB\u8131\u654F"]})]}),a("div",{className:"view__foot",children:n?`\u660E\u65E5\u8BA1\u5212\uFF1A\u7545\u8FEA${n.type}\u53F7\uFF0C${n.number}\u6EF4`:void 0})]})},A=()=>{const e=h("name"),t=h("date"),[s,o]=m.exports.useState(u.FRESH);return e&&t&&s===u.FRESH&&o(u.VIEW),{state:s,setState:o,name:e,date:t}};function B(){const e=A();return a("div",{className:"App",children:e.state===u.VIEW?a(b,{setState:e.setState}):a(D,{setState:e.setState})})}w.render(a(N.StrictMode,{children:a(B,{})}),document.getElementById("root"));
