import{j as F,r as m,R as w,a as N}from"./vendor.b3af9389.js";const C=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}};C();const s=F.exports.jsx,r=F.exports.jsxs,E=F.exports.Fragment,f=e=>r("div",{className:"field",children:[s("div",{className:"field__label",children:e.label}),s("div",{className:"field__content",children:e.children})]});var u;(function(e){e[e.FRESH=0]="FRESH",e[e.VIEW=1]="VIEW",e[e.RESET=2]="RESET"})(u||(u={}));const g=e=>`DESENSITIZE_${e}`,y=(e,t="1")=>localStorage.setItem(g(e),t),_=e=>{const t=g(e),a=localStorage.getItem(t);if(a)return a},D=e=>{const[t,a]=m.exports.useState(""),[o,n]=m.exports.useState("");return r("div",{className:"home",children:[s("h1",{className:"home__title",children:"\u8131\u654F\u8BA1\u5212"}),s(f,{label:"\u6211\u8BE5\u600E\u4E48\u79F0\u547C\u4F60\uFF1F",children:s("input",{value:t,onChange:h=>{const l=h.target;if(!l)return;const p=l.value;a(p)}})}),s(f,{label:"\u4F60\u4ECE\u4EC0\u4E48\u65F6\u5019\u5F00\u59CB\u8131\u654F\uFF1F",children:s("input",{type:"date",value:o,onChange:h=>{const l=h.target;if(!l)return;const p=l.value;n(p)}})}),s(f,{children:s("button",{className:"home__button",onClick:()=>{!t||!o||(y("name",t),y("date",o),e.setState(u.VIEW))},children:"\u5F00\u59CB\u5427"})})]})};const v=[{type:1,dose:[1,2,3,4,6,8,10]},{type:2,dose:[1,2,3,4,6,8,10]},{type:3,dose:[1,2,3,4,6,8,10]},{type:4,dose:[3]},{type:4,dose:[3]},{type:5,dose:[2]}],x=(e=new Date().toLocaleDateString())=>{const t=new Date(e);return t.setDate(t.getDate()+1),t.toLocaleDateString()},S=(e,t)=>{const a=t?+new Date(t):+new Date(new Date().toLocaleDateString()),o=+new Date(e);if(a<o)return;const n=Math.ceil((a-o)/(1e3*60*60*24))+1,c=Math.ceil(n/7),i=n%7,d=c>v.length?v.slice(-1)[0]:v[c-1];return{type:d.type,number:d.dose[i-1]||d.dose.slice(-1)}},b=e=>{const t=_("name"),a=_("date");if(m.exports.useEffect(()=>{(!t||!a)&&e.setState(u.FRESH)},[]),!t||!a)return s(E,{});const o=S(a),n=S(a,x()),c=()=>{e.setState(u.RESET)},i=new Date().toLocaleDateString().split("/").join("-");return r("div",{className:"view",children:[r("div",{className:"view__head",children:[s("span",{className:"view__head__reset",onClick:c,children:"\u91CD\u65B0\u8BBE\u5B9A"}),r("span",{className:"view__head__time",children:["\u5F00\u59CB\u65F6\u95F4\uFF1A",a]})]}),r("div",{className:"view__content",children:[r("h1",{className:"view__content__name",children:["\u4F60\u597D\uFF0C",t]}),o?r(E,{children:[r("p",{className:"view__content__current",children:["\u4ECA\u65E5\u8BA1\u5212, ",i]}),r("p",{className:"view__content__plan",children:["\u7545\u8FEA",s("span",{className:`view__content__type view__content__type--${o.type}`,children:o.type}),"\u53F7\uFF0C",s("span",{className:`view__content__number view__content__number--${o.number}`,children:o.number}),"\u6EF4"]})]}):r("p",{style:{textAlign:"center"},children:["\u4F60\u5C06\u5728",s("span",{className:"view__content__nextdate",children:a}),"\u5F00\u59CB\u8131\u654F"]})]}),s("div",{className:"view__foot",children:n?`\u660E\u65E5\u8BA1\u5212\uFF1A\u7545\u8FEA${n.type}\u53F7\uFF0C${n.number}\u6EF4`:void 0})]})},A=()=>{const e=_("name"),t=_("date"),[a,o]=m.exports.useState(u.FRESH);return e&&t&&a===u.FRESH&&o(u.VIEW),{state:a,setState:o,name:e,date:t}};function B(){const e=A();return s("div",{className:"App",children:e.state===u.VIEW?s(b,{setState:e.setState}):s(D,{setState:e.setState})})}w.render(s(N.StrictMode,{children:s(B,{})}),document.getElementById("root"));
